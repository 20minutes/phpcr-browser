<div class="col-lg-12" ng-controller="mbRepositoryCtrl">
    <div class="col-sm-2" ng-repeat="(key, workspace) in workspaces | mbJaroWinkler:search" ng-class="{ 'no-draggable': !repository.supports('workspace.delete') }" draggable id="{{ workspace.getSlug() }}">
        <div class="panel panel-workspace" ng-click="openWorkspace(workspace)">
            <div class="panel-heading">
                Workspace
            </div>
            <div class="panel-body">
                <p class="lead text-center">
                    {{ workspace.getName() }}
                </p>
            </div>
        </div>
    </div>
    <div class="col-sm-2" ng-if="repository.supports('workspace.create')">
        <div class="panel panel-workspace panel-new-workspace">
            <div class="panel-body">
                <p class="lead text-center" ng-click="showCreateForm()" ng-hide="displayCreateForm">
                    Create a workspace
                </p>
                <form ng-submit="createWorkspace(workspaceName)" ng-if="displayCreateForm">
                    <p class="text-center">
                        <input type="text" ng-model="workspaceName" mb-focus-me="displayCreateForm" class="form-control workspace-input" placeholder="Enter a name" ui-keydown="{esc: 'hideCreateForm()'}"/>
                    </p>
                </form>
            </div>
        </div>
    </div>
    <div class="trash trash-square" droppable drop="deleteWorkspace" ng-if="repository.supports('workspace.delete')">
        <span class="glyphicon glyphicon-trash"></span>
        <p>Drop to delete</p>
    </div>
</div>